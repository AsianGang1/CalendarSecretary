<!doctype html><html><head><title>Calendar Secretary</title><meta charset="utf-8"/><script defer="defer" src="https://unpkg.com/alpinejs@3.10.2/dist/cdn.min.js"></script><link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet"/><script defer="defer" src="/AsianGang1/CalendarSecretary/static/js/main.e6b35e86.js"></script><link href="/AsianGang1/CalendarSecretary/static/css/main.073c9b0a.css" rel="stylesheet"></head><body class="antialiased bg-gray-100"><section class="antialiased bg-gray-100 text-gray-600 h-screen px-4 pb-20" x-data="app"><div class="flex justify-center pt-20 mb-6"><div class="container max-w-7xl px-4"><div class="flex flex-wrap justify-center text-center"><div class="w-full lg:w-6/12 px-4"><h1 class="text-gray-900 text-4xl font-bold mb-4">Calendar Secretary</h1><p class="text-gray-700 text-lg font-light">By Nathan Lintu and Erik Pederson</p></div></div></div></div><div class="flex items-center justify-center"><button onclick="handleAuthClick()" id="authorize_button" class="mx-1 px-4 py-2 rounded-xl text-white bg-green-500 hover:bg-green-600 transition">Authorize</button></div><div id="signout_button" class="flex items-center justify-center py-4"><button onclick="handleSignoutClick()" class="text-white px-4 py-2 rounded-xl bg-red-500 hover:bg-red-600 transition">Sign Out</button></div><div class="flex flex-col justify-center pb-20"><div class="w-full max-w-2xl mx-auto bg-white shadow-lg rounded-sm border border-gray-200"><header class="px-5 py-4 border-b border-gray-100"><div class="font-semibold text-gray-800">My Calendar</div></header><div class="overflow-x-auto p-3"><table id="table" class="table-auto w-full"><thead class="text-xs font-semibold uppercase text-gray-400 bg-gray-50"><tr><th></th><th class="p-2"><div class="font-semibold text-left">Event</div></th><th class="p-2"><div class="font-semibold text-left">Start</div></th><th class="p-2"><div class="font-semibold text-left">End</div></th><th class="p-2"><div class="font-semibold text-center">Action</div></th></tr></thead><tbody class="text-sm divide-y divide-gray-100 py-10"></tbody></table></div><div class="flex justify-end"><input type="hidden" class="border border-black bg-gray-50" x-model="selected"/></div></div></div></section><div class="alan-btn"></div><script type="text/javascript" src="https://studio.alan.app/web/lib/alan_lib.min.js"></script><script>function getNextLargest(e,t,n){return min_largest=1e6,t.forEach((t=>{t>e&&t<min_largest&&(min_largest=t)})),Math.min(min_largest,n)}function extractREG(e){var t=["description","location","frequency","count"],n=["","","",""],a={};t.forEach((t=>{var n=e.indexOf(t);a[t]=n})),dictVals=Object.values(a);for(var r=0;r<Object.keys(a).length;r++)if(dictVals[r]>=0){var i=getNextLargest(dictVals[r],dictVals,e.length);console.log(i),n[r]=e.substring(dictVals[r]+t[r].length,i).trim()}return n}var alanBtnInstance=alanBtn({key:"aa8e87eca3b62befe745d3d71b0f8b0c2e956eca572e1d8b807a3e2338fdd0dc/stage",onCommand:function(e){let t,n,a,r;if(console.log(e),[t,n,a,r]=extractREG(e.reg),ruleString="",""!=a){ruleString=""!=r?`RRULE:FREQ=${a};COUNT=${r}`:`RRULE:FREQ=${a}`;var i={summary:e.name,location:n,description:t,start:{dateTime:e.start+"T00:00:00-07:00",timeZone:"America/Los_Angeles"},end:{dateTime:e.end+"T00:00:00-07:00",timeZone:"America/Los_Angeles"},recurrence:[ruleString],reminders:{useDefault:!1,overrides:[{method:"email",minutes:1440},{method:"popup",minutes:10}]}}}else i={summary:e.name,location:n,description:t,start:{dateTime:e.start+"T00:00:00-07:00",timeZone:"America/Los_Angeles"},end:{dateTime:e.end+"T00:00:00-07:00",timeZone:"America/Los_Angeles"},reminders:{useDefault:!1,overrides:[{method:"email",minutes:1440},{method:"popup",minutes:10}]}};createeEvent(i)},rootEl:document.getElementById("alan-btn")})</script><script type="text/javascript">const CLIENT_ID="54461332338-mmb7gj8gpe3sh3evkmtq1n3vcfuliam4.apps.googleusercontent.com",API_KEY="AIzaSyD4FX_3wYtAED3xTxw0I_dUaStc3OBbnZo",DISCOVERY_DOC="https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest",SCOPES="https://www.googleapis.com/auth/calendar";let tokenClient,gapiInited=!1,gisInited=!1;function gapiLoaded(){gapi.load("client",intializeGapiClient)}function deleteEvent(t){}async function intializeGapiClient(){await gapi.client.init({apiKey:API_KEY,discoveryDocs:[DISCOVERY_DOC]}),gapiInited=!0,maybeEnableButtons()}function gisLoaded(){tokenClient=google.accounts.oauth2.initTokenClient({client_id:CLIENT_ID,scope:SCOPES,callback:""}),gisInited=!0,maybeEnableButtons()}function createeEvent(t){gapi.client.calendar.events.insert({calendarId:"primary",resource:t}).execute((function(t){appendTable(t)}))}function appendTable(t){document.getElementById("table").innerHTML+='<tr id="'+t.id+'">\n                <td class="p-2">\n                  <input type="checkbox" class="w-5 h-5" value="id-3" @click="toggleCheckbox($el, 15.00)" />\n                </td>\n                <td class="p-2">\n                  <div>\n                    <div class="font-medium text-gray-800">'+t.summary+'</div>\n                  </div>\n                </td>\n                <td class="p-2">\n                  <div class="text-left">'+t.start.dateTime+'</div>\n                </td>\n                <td class="p-2">\n                  <div class="text-left font-medium text-green-500">'+t.end.dateTime+'</div>\n                </td>\n                <td class="p-2">\n                  <div class="flex justify-center">\n                    <button onclick=\'var request = gapi.client.calendar.events.delete({\n          calendarId: "primary",\n          eventId: "'+t.id+'",\n        });request.execute();document.getElementById("'+t.id+'").remove()\'>\n                      <svg class="w-8 h-8 hover:text-blue-600 rounded-full hover:bg-gray-100 p-1" fill="none"\n                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">\n                        </path>\n                      </svg>\n                    </button>\n                  </div>\n                </td>\n              </tr>'}function maybeEnableButtons(){gapiInited&&gisInited&&(document.getElementById("authorize_button").style.visibility="visible")}function handleAuthClick(){(tokenClient.callback=async t=>{if(void 0!==t.error)throw t;document.getElementById("signout_button").style.visibility="visible",document.getElementById("authorize_button").innerText="Refresh",await listUpcomingEvents()},null===gapi.client.getToken())?tokenClient.requestAccessToken({prompt:"consent"}):(tokenClient.requestAccessToken({prompt:""}),document.getElementById("table").innerHTML='<thead\n                class="text-xs font-semibold uppercase text-gray-400 bg-gray-50"\n              >\n                <tr>\n                  <th></th>\n                  <th class="p-2">\n                    <div class="font-semibold text-left">Event</div>\n                  </th>\n                  <th class="p-2">\n                    <div class="font-semibold text-left">Start</div>\n                  </th>\n                  <th class="p-2">\n                    <div class="font-semibold text-left">End</div>\n                  </th>\n                  <th class="p-2">\n                    <div class="font-semibold text-center">Action</div>\n                  </th>\n                </tr>\n              </thead>\n\n              <tbody class="text-sm divide-y divide-gray-100 py-10"></tbody>')}function handleSignoutClick(){null!==gapi.client.getToken()&&(gapi.client.setToken(""),document.getElementById("authorize_button").innerText="Authorize",document.getElementById("signout_button").style.visibility="hidden",document.getElementById("table").innerHTML='<thead\n                class="text-xs font-semibold uppercase text-gray-400 bg-gray-50"\n              >\n                <tr>\n                  <th></th>\n                  <th class="p-2">\n                    <div class="font-semibold text-left">Event</div>\n                  </th>\n                  <th class="p-2">\n                    <div class="font-semibold text-left">Start</div>\n                  </th>\n                  <th class="p-2">\n                    <div class="font-semibold text-left">End</div>\n                  </th>\n                  <th class="p-2">\n                    <div class="font-semibold text-center">Action</div>\n                  </th>\n                </tr>\n              </thead>\n\n              <tbody class="text-sm divide-y divide-gray-100 py-10"></tbody>')}async function listUpcomingEvents(){let t;try{const e={calendarId:"primary",timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:10,orderBy:"startTime"};t=await gapi.client.calendar.events.list(e)}catch(t){return void(document.getElementById("content").innerText=t.message)}const e=t.result.items;var n=document.getElementById("table");console.log("listing upcoming");for(const t in e)data=e[t],n.innerHTML+='<tr id="'+data.id+'">\n                <td class="p-2">\n                  <input type="checkbox" class="w-5 h-5" value="id-3" @click="toggleCheckbox($el, 15.00)" />\n                </td>\n                <td class="p-2">\n                  <div>\n                    <div class="font-medium text-gray-800">'+data.summary+'</div>\n                  </div>\n                </td>\n                <td class="p-2">\n                  <div class="text-left">'+data.start.dateTime+'</div>\n                </td>\n                <td class="p-2">\n                  <div class="text-left font-medium text-green-500">'+data.end.dateTime+'</div>\n                </td>\n                <td class="p-2">\n                  <div class="flex justify-center">\n                    <button onclick=\'var request = gapi.client.calendar.events.delete({\n          calendarId: "primary",\n          eventId: "'+data.id+'",\n        });request.execute();document.getElementById("'+data.id+'").remove()\'>\n                      <svg class="w-8 h-8 hover:text-blue-600 rounded-full hover:bg-gray-100 p-1" fill="none"\n                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">\n                        </path>\n                      </svg>\n                    </button>\n                  </div>\n                </td>\n              </tr>',console.log(data.id),console.log('<button onclick=\'var request = gapi.client.calendar.events.delete({\n          calendarId: "primary",\n          eventId: "'+data.id+'",\n        });request.execute();document.getElementById("'+data.id+'").remove()\'>\n                      <svg class="w-8 h-8 hover:text-blue-600 rounded-full hover:bg-gray-100 p-1" fill="none"\n                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">\n                        </path>\n                      </svg>\n                    </button>');e&&e.length}document.getElementById("authorize_button").style.visibility="hidden",document.getElementById("signout_button").style.visibility="hidden"</script><script async defer="defer" src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script><script async defer="defer" src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script><script>document.addEventListener("alpine:init",(()=>{Alpine.data("app",(()=>({total:0,selected:[],toggleCheckbox(e,t){if(e.checked)this.selected.push(e.value),this.total+=t;else{const l=this.selected.indexOf(e.value);l>-1&&this.selected.splice(l,1),this.total-=t}}})))}))</script></body></html>